# test-task-stepcart
1 million messages

Задача - передать с клиента на сервер 1 млн сообщений через сокет непрерывно,
на сервере - записать все в filestream.

Данный репозиторий использует сервер express.
Клиент обращается к базовой странице сервера, откроется страница из JADE представления 
(test-task-stepcart/views/index.jade и test-task-stepcart/views/layout.jade)
На странице присутствует форма с полями для ввода текстового значения description 
и количества отправляемых экземпляров сообщения на сервер (по умолчанию 1 млн).

На сервере и клиенте происходит подключение библиотеки socket.io.
После загрузки страницы происходит автоматическое подключение к сокету на сервере по порту 888. Строка статуса меняется.
В файле public/javascripts/actions.js можно настроить размер синхронной очереди передачи сообщений 
conf.portion (используется цикл for), а так же период повторения вызова функции заполения очереди conf.period.

После нажатия на кнопку "отправить" через сокет на сервер отправляется очередь сообщений.
Сообщения генерируются в виде объекта {id:value, description:value} (функция app.getMessage())
id - время в миллисекундах в виде 16-р строки + случайное число в виде 16-р строки.

На сервере сообщение принимает вид valueOfId:{description:value, date:value} (добавляется timestamp);
После приема каждого сообщения, оно записывается в filestream (out.txt), каждые 1000 сообщений выводится запись в консоль;
Для создания потока записи использована библиотека fs.
